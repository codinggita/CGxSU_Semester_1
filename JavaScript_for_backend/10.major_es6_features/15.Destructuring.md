# Destructuring Assignment - Clean Data Extraction in JavaScript

## Metadata

- **Topic**: Destructuring Assignment (Arrays & Objects)
- **Difficulty**: Beginner to Advanced
- **Prerequisites**: Arrays, objects, basic ES6 syntax
- **ES Version**: ES6 (ES2015)
- **Estimated Time**: 120 minutes
- **Learning Objectives**:
  - Master array destructuring with all features
  - Master object destructuring with all features
  - Use nested destructuring effectively
  - Apply destructuring in function parameters
  - Combine destructuring with other ES6 features
  - Write cleaner, more maintainable code

---

## Table of Contents

1. [Introduction](#introduction)
2. [Array Destructuring Basics](#array-destructuring-basics)
3. [Array Destructuring Advanced](#array-destructuring-advanced)
4. [Object Destructuring Basics](#object-destructuring-basics)
5. [Object Destructuring Advanced](#object-destructuring-advanced)
6. [Nested Destructuring](#nested-destructuring)
7. [Function Parameter Destructuring](#function-parameter-destructuring)
8. [Destructuring in Loops](#destructuring-in-loops)
9. [Practical Use Cases](#practical-use-cases)
10. [Common Pitfalls](#common-pitfalls)
11. [Exercises](#exercises)
12. [Solutions](#solutions)
13. [Tests](#tests)

---

## Introduction

Destructuring assignment is one of the most powerful and commonly used ES6 features. It allows you to extract values from arrays and objects and assign them to variables in a clean, concise way.

### The Problem Before ES6

```javascript
// Extracting array values - repetitive and verbose
var coordinates = [10, 20, 30];
var x = coordinates[0];
var y = coordinates[1];
var z = coordinates[2];

// Extracting object properties - repetitive
var student = { name: "Arjun", age: 19, branch: "CSE" };
var name = student.name;
var age = student.age;
var branch = student.branch;

// Swapping variables - requires temporary variable
var a = 5, b = 10;
var temp = a;
a = b;
b = temp;
```

### The ES6 Solution

```javascript
// Array destructuring - clean and concise
const [x, y, z] = [10, 20, 30];

// Object destructuring - extracts properties automatically
const { name, age, branch } = student;

// Swapping variables - one line!
[a, b] = [b, a];
```

---

## Array Destructuring Basics

Array destructuring extracts values from arrays based on position.

### Basic Syntax

```javascript
// Traditional way
const colors = ["red", "green", "blue"];
const first = colors[0];
const second = colors[1];

// Destructuring way
const [first, second, third] = ["red", "green", "blue"];
console.log(first);  // "red"
console.log(second); // "green"
console.log(third);  // "blue"
```

### With Existing Arrays

```javascript
const numbers = [1, 2, 3, 4, 5];
const [a, b, c] = numbers;

console.log(a); // 1
console.log(b); // 2
console.log(c); // 3
// Note: 4 and 5 are ignored
```

### Skipping Elements

```javascript
const fruits = ["apple", "banana", "orange", "mango"];

// Skip banana, get apple and orange
const [first, , third] = fruits;
console.log(first); // "apple"
console.log(third); // "orange"

// Skip first two
const [, , third, fourth] = fruits;
console.log(third);  // "orange"
console.log(fourth); // "mango"
```

### Default Values

```javascript
// When array has fewer elements than variables
const [a, b, c = 10] = [1, 2];
console.log(a); // 1
console.log(b); // 2
console.log(c); // 10 (default value)

// Default value is not used if element exists
const [x, y, z = 10] = [1, 2, 3];
console.log(z); // 3 (not 10)

// Default value can be an expression
const [p, q = p * 2] = [5];
console.log(q); // 10
```

### Variable Swapping

```javascript
// The famous swap without temporary variable
let a = 10;
let b = 20;

[a, b] = [b, a];

console.log(a); // 20
console.log(b); // 10

// Rotate three variables
let x = 1, y = 2, z = 3;
[x, y, z] = [y, z, x];
console.log(x, y, z); // 2 3 1
```

---

## Array Destructuring Advanced

### Rest Pattern

```javascript
// Collect remaining elements
const [first, second, ...rest] = [1, 2, 3, 4, 5];
console.log(first);  // 1
console.log(second); // 2
console.log(rest);   // [3, 4, 5]

// Rest must be last
const [head, ...tail] = [10, 20, 30, 40];
console.log(head); // 10
console.log(tail); // [20, 30, 40]

// Can be used with skipping
const [, , ...others] = [1, 2, 3, 4, 5];
console.log(others); // [3, 4, 5]
```

### Nested Arrays

```javascript
// Destructure nested arrays
const nested = [1, [2, 3], 4];
const [a, [b, c], d] = nested;

console.log(a); // 1
console.log(b); // 2
console.log(c); // 3
console.log(d); // 4

// Complex nesting
const complex = [1, [2, [3, 4]], 5];
const [x, [y, [z, w]], v] = complex;
console.log(x, y, z, w, v); // 1 2 3 4 5
```

### Destructuring Return Values

```javascript
// Return multiple values from function
function getCoordinates() {
  return [10, 20];
}

const [x, y] = getCoordinates();
console.log(x, y); // 10 20

// With array methods
const numbers = [1, 2, 3, 4, 5];
const [min, max] = [Math.min(...numbers), Math.max(...numbers)];
console.log(min, max); // 1 5

// Split strings
const [firstName, lastName] = "Arjun Kumar".split(" ");
console.log(firstName); // "Arjun"
console.log(lastName);  // "Kumar"
```

### Ignoring Return Values

```javascript
// Get only what you need
function getStats() {
  return [100, 50, 25, 10];
}

const [total, , , minimum] = getStats();
console.log(total, minimum); // 100 10
```

---

## Object Destructuring Basics

Object destructuring extracts properties by name (not position).

### Basic Syntax

```javascript
const student = {
  name: "Krishna",
  age: 20,
  branch: "CSE"
};

// Extract properties
const { name, age, branch } = student;
console.log(name);   // "Krishna"
console.log(age);    // 20
console.log(branch); // "CSE"
```

### Order Doesn't Matter

```javascript
// Position doesn't matter - names matter
const { age, name, branch } = student;
console.log(name); // "Krishna" (works fine)

// Extract only needed properties
const { name } = student;
console.log(name); // "Krishna"
```

### Renaming Variables

```javascript
const student = { name: "Arjun", age: 19 };

// Rename while destructuring
const { name: studentName, age: studentAge } = student;

console.log(studentName); // "Arjun"
console.log(studentAge);  // 19
// console.log(name);     // ReferenceError: name is not defined

// Useful when names conflict
const user = { name: "User1", age: 25 };
const admin = { name: "Admin1", age: 30 };

const { name: userName } = user;
const { name: adminName } = admin;

console.log(userName, adminName); // "User1" "Admin1"
```

### Default Values

```javascript
const student = { name: "Priya" };

// Provide default for missing property
const { name, age = 18, branch = "CSE" } = student;

console.log(name);   // "Priya"
console.log(age);    // 18 (default)
console.log(branch); // "CSE" (default)

// Combine renaming and defaults
const { name: studentName, marks = 0 } = student;
console.log(studentName); // "Priya"
console.log(marks);       // 0
```

### Destructuring from Function Returns

```javascript
function getUser() {
  return {
    id: 101,
    username: "arjun",
    email: "arjun@example.com",
    role: "admin"
  };
}

const { username, email } = getUser();
console.log(username); // "arjun"
console.log(email);    // "arjun@example.com"
```

---

## Object Destructuring Advanced

### Rest in Objects

```javascript
const student = {
  name: "Mahir",
  age: 19,
  branch: "CSE",
  city: "Ahmedabad",
  state: "Gujarat"
};

// Extract some, collect rest
const { name, age, ...otherInfo } = student;

console.log(name);      // "Mahir"
console.log(age);       // 19
console.log(otherInfo); // { branch: "CSE", city: "Ahmedabad", state: "Gujarat" }
```

### Computed Property Names

```javascript
const prop = "name";
const { [prop]: value } = { name: "Krishna", age: 20 };

console.log(value); // "Krishna"

// Dynamic key extraction
function extractProperty(obj, key) {
  const { [key]: value } = obj;
  return value;
}

console.log(extractProperty({ x: 10, y: 20 }, "y")); // 20
```

### Destructuring Nested Objects

```javascript
const user = {
  name: "Arjun",
  address: {
    city: "Ahmedabad",
    state: "Gujarat",
    pincode: 380001
  },
  contact: {
    email: "arjun@example.com",
    phone: "9876543210"
  }
};

// Extract nested properties
const {
  name,
  address: { city, state },
  contact: { email }
} = user;

console.log(name);  // "Arjun"
console.log(city);  // "Ahmedabad"
console.log(state); // "Gujarat"
console.log(email); // "arjun@example.com"

// Note: address and contact variables are NOT created
// Only city, state, and email are extracted
```

### Deep Nesting with Defaults

```javascript
const config = {
  server: {
    host: "localhost",
    port: 3000
  }
};

// Extract with defaults for missing nested properties
const {
  server: {
    host,
    port,
    protocol = "http"
  },
  database: {
    host: dbHost = "localhost",
    port: dbPort = 5432
  } = {} // Default for database object itself
} = config;

console.log(host);     // "localhost"
console.log(port);     // 3000
console.log(protocol); // "http" (default)
console.log(dbHost);   // "localhost" (default)
console.log(dbPort);   // 5432 (default)
```

---

## Nested Destructuring

### Mixed Array and Object Destructuring

```javascript
const data = {
  name: "Arjun",
  scores: [85, 92, 78, 90],
  metadata: {
    year: 2024,
    semester: 3
  }
};

// Extract from both object and arrays
const {
  name,
  scores: [firstScore, secondScore, ...otherScores],
  metadata: { year, semester }
} = data;

console.log(name);         // "Arjun"
console.log(firstScore);   // 85
console.log(secondScore);  // 92
console.log(otherScores);  // [78, 90]
console.log(year);         // 2024
console.log(semester);     // 3
```

### Complex Real-World Example

```javascript
const apiResponse = {
  status: 200,
  data: {
    user: {
      id: 101,
      profile: {
        name: "Krishna",
        email: "krishna@example.com"
      },
      settings: {
        notifications: true,
        theme: "dark"
      }
    },
    posts: [
      { id: 1, title: "First Post", likes: 10 },
      { id: 2, title: "Second Post", likes: 25 }
    ]
  }
};

// Extract deeply nested data
const {
  status,
  data: {
    user: {
      id: userId,
      profile: { name, email },
      settings: { theme }
    },
    posts: [firstPost, { likes: secondPostLikes }]
  }
} = apiResponse;

console.log(status);           // 200
console.log(userId);           // 101
console.log(name);             // "Krishna"
console.log(email);            // "krishna@example.com"
console.log(theme);            // "dark"
console.log(firstPost.title);  // "First Post"
console.log(secondPostLikes);  // 25
```

---

## Function Parameter Destructuring

### Object Parameters

```javascript
// Traditional function
function displayStudent(student) {
  console.log(`${student.name} - ${student.branch} - ${student.age}`);
}

// With destructuring
function displayStudent({ name, branch, age }) {
  console.log(`${name} - ${branch} - ${age}`);
}

displayStudent({ name: "Arjun", branch: "CSE", age: 19 });
// Output: Arjun - CSE - 19
```

### With Default Values

```javascript
function createUser({ name, age = 18, role = "user", active = true }) {
  return {
    name,
    age,
    role,
    active,
    createdAt: new Date()
  };
}

const user1 = createUser({ name: "Krishna" });
console.log(user1);
// { name: "Krishna", age: 18, role: "user", active: true, createdAt: ... }

const user2 = createUser({ name: "Arjun", age: 20, role: "admin" });
console.log(user2);
// { name: "Arjun", age: 20, role: "admin", active: true, createdAt: ... }
```

### Default Object Parameter

```javascript
// Handle undefined parameter gracefully
function configure({ host = "localhost", port = 3000, ssl = false } = {}) {
  console.log(`Server: ${host}:${port} (SSL: ${ssl})`);
}

configure({ host: "example.com", port: 8080 });
// Server: example.com:8080 (SSL: false)

configure();
// Server: localhost:3000 (SSL: false)
// Works because of = {} default
```

### Array Parameters

```javascript
function sum([a, b, c = 0]) {
  return a + b + c;
}

console.log(sum([10, 20, 30])); // 60
console.log(sum([10, 20]));     // 30

// With rest
function multiply([first, ...rest]) {
  return rest.reduce((product, num) => product * num, first);
}

console.log(multiply([2, 3, 4])); // 24
```

### Complex Parameter Destructuring

```javascript
function processOrder({
  orderId,
  customer: { name, email },
  items: [firstItem, ...otherItems],
  payment: { method = "cash", status = "pending" } = {}
}) {
  console.log(`Order ${orderId} for ${name} (${email})`);
  console.log(`First item: ${firstItem.name}`);
  console.log(`Payment: ${method} - ${status}`);
  console.log(`Other items: ${otherItems.length}`);
}

processOrder({
  orderId: "ORD001",
  customer: { name: "Arjun", email: "arjun@example.com" },
  items: [
    { name: "Laptop", price: 45000 },
    { name: "Mouse", price: 500 },
    { name: "Keyboard", price: 1500 }
  ],
  payment: { method: "card", status: "completed" }
});
```

---

## Destructuring in Loops

### Array of Objects

```javascript
const students = [
  { name: "Arjun", marks: 85 },
  { name: "Krishna", marks: 92 },
  { name: "Priya", marks: 78 }
];

// Destructure in for...of loop
for (const { name, marks } of students) {
  console.log(`${name}: ${marks}`);
}
// Output:
// Arjun: 85
// Krishna: 92
// Priya: 78

// With array methods
students.forEach(({ name, marks }) => {
  console.log(`${name} scored ${marks}`);
});

// Map with destructuring
const names = students.map(({ name }) => name);
console.log(names); // ["Arjun", "Krishna", "Priya"]
```

### Object Entries

```javascript
const scores = {
  math: 85,
  physics: 92,
  chemistry: 78
};

// Destructure entries
for (const [subject, score] of Object.entries(scores)) {
  console.log(`${subject}: ${score}`);
}
// Output:
// math: 85
// physics: 92
// chemistry: 78
```

### Nested Structures in Loops

```javascript
const orders = [
  {
    id: 1,
    customer: { name: "Arjun", city: "Ahmedabad" },
    total: 5000
  },
  {
    id: 2,
    customer: { name: "Krishna", city: "Surat" },
    total: 3000
  }
];

for (const { id, customer: { name, city }, total } of orders) {
  console.log(`Order #${id}: ${name} from ${city} - ₹${total}`);
}
```

---

## Practical Use Cases

### 1. API Response Handling

```javascript
async function fetchUserData(userId) {
  const response = await fetch(`/api/users/${userId}`);
  const {
    data: {
      user: { name, email, profile },
      posts
    },
    meta: { page, total }
  } = await response.json();

  return { name, email, profile, posts, page, total };
}
```

### 2. Configuration Management

```javascript
function initializeApp(config) {
  const {
    api: {
      baseURL = "https://api.example.com",
      timeout = 5000,
      headers = {}
    } = {},
    features: {
      enableAuth = true,
      enableLogging = false
    } = {}
  } = config;

  console.log("Initializing with:", {
    baseURL,
    timeout,
    headers,
    enableAuth,
    enableLogging
  });
}

initializeApp({
  api: { baseURL: "https://my-api.com" },
  features: { enableLogging: true }
});
```

### 3. React Component Props (Popular Pattern)

```javascript
// React-style component with destructured props
function StudentCard({ student: { name, rollNo, branch, cgpa }, onEdit }) {
  return `
    <div class="student-card">
      <h3>${name}</h3>
      <p>Roll: ${rollNo}</p>
      <p>Branch: ${branch}</p>
      <p>CGPA: ${cgpa}</p>
      <button onclick="onEdit('${rollNo}')">Edit</button>
    </div>
  `;
}
```

### 4. Multiple Return Values

```javascript
function analyzeData(numbers) {
  return {
    min: Math.min(...numbers),
    max: Math.max(...numbers),
    avg: numbers.reduce((a, b) => a + b) / numbers.length,
    count: numbers.length
  };
}

// Extract only needed values
const { min, max, avg } = analyzeData([10, 20, 30, 40, 50]);
console.log(`Range: ${min}-${max}, Average: ${avg}`);
```

### 5. Destructuring Imports (Module Pattern)

```javascript
// Import specific functions
// const { readFile, writeFile, appendFile } = require('fs').promises;

// Destructure from object
const utils = {
  add: (a, b) => a + b,
  subtract: (a, b) => a - b,
  multiply: (a, b) => a * b,
  divide: (a, b) => a / b
};

const { add, multiply } = utils;
console.log(add(5, 3));      // 8
console.log(multiply(4, 2)); // 8
```

### 6. Event Handler Parameters

```javascript
// DOM event destructuring
function handleFormSubmit(event) {
  event.preventDefault();

  const {
    target: {
      elements: {
        username: { value: username },
        email: { value: email }
      }
    }
  } = event;

  console.log("Form data:", { username, email });
}

// Mouse event destructuring
function handleClick({ clientX, clientY, target }) {
  console.log(`Clicked at (${clientX}, ${clientY}) on`, target.tagName);
}
```

---

## Common Pitfalls

### 1. Destructuring null or undefined

```javascript
// ❌ WRONG: Will throw error
// const { name } = null;
// const { age } = undefined;

// ✅ CORRECT: Provide default
const user = null;
const { name = "Guest" } = user || {};
console.log(name); // "Guest"

// Or use optional chaining (ES2020)
const data = null;
const name = data?.name ?? "Unknown";
```

### 2. Confusing Variable Names

```javascript
const obj = { x: 10 };

// ❌ WRONG: Property doesn't exist
const { y } = obj;
console.log(y); // undefined (not an error, but unexpected)

// ✅ CORRECT: Use correct property name or provide default
const { y = 0 } = obj;
console.log(y); // 0
```

### 3. Destructuring in Wrong Context

```javascript
// ❌ WRONG: Can't use destructuring without declaration
let x, y;
// { x, y } = { x: 10, y: 20 }; // SyntaxError

// ✅ CORRECT: Wrap in parentheses
({ x, y } = { x: 10, y: 20 });
console.log(x, y); // 10 20

// Or use with declaration keyword
let { x, y } = { x: 10, y: 20 };
```

### 4. Rest Must Be Last

```javascript
// ❌ WRONG: Rest must be at the end
// const [...rest, last] = [1, 2, 3]; // SyntaxError

// ✅ CORRECT
const [first, ...rest] = [1, 2, 3];
console.log(first, rest); // 1 [2, 3]
```

### 5. Over-Nesting

```javascript
// ❌ AVOID: Too complex, hard to read
const {
  a: {
    b: {
      c: {
        d: {
          e: value
        }
      }
    }
  }
} = data;

// ✅ BETTER: Break into steps or use optional chaining
const value = data?.a?.b?.c?.d?.e;
```

---

## Exercises

### Exercise 1: Array Basics (Easy)

Write a function `extractFirstThree(arr)` that uses destructuring to return an object with `first`, `second`, and `third` properties.

```javascript
extractFirstThree([10, 20, 30, 40, 50]);
// { first: 10, second: 20, third: 30 }
```

---

### Exercise 2: Swap Variables (Easy)

Write a function `swapValues(a, b, c)` that returns an array with the values rotated: b, c, a.

```javascript
swapValues(1, 2, 3); // [2, 3, 1]
```

---

### Exercise 3: Object Property Extraction (Easy)

Create a function `getUserInfo(user)` that extracts and returns only `name`, `email`, and `age` properties.

```javascript
const user = { id: 1, name: "Arjun", email: "arjun@test.com", age: 19, role: "student" };
getUserInfo(user); // { name: "Arjun", email: "arjun@test.com", age: 19 }
```

---

### Exercise 4: Nested Object Destructuring (Medium)

Write a function `extractAddress(user)` that extracts city and pincode from a nested address object.

```javascript
const user = {
  name: "Krishna",
  address: { city: "Ahmedabad", state: "Gujarat", pincode: 380001 }
};
extractAddress(user); // { city: "Ahmedabad", pincode: 380001 }
```

---

### Exercise 5: Function Parameters (Medium)

Create a function `createEmployee` that takes destructured parameters and returns an employee object with defaults.

```javascript
createEmployee({ name: "Arjun", department: "IT" });
// { name: "Arjun", department: "IT", role: "Developer", salary: 50000 }
```

---

### Exercise 6: Array of Objects Processing (Medium)

Write a function `getTopScorers(students, count)` that returns names of top N students by marks.

```javascript
const students = [
  { name: "Arjun", marks: 85 },
  { name: "Krishna", marks: 92 },
  { name: "Priya", marks: 78 }
];
getTopScorers(students, 2); // ["Krishna", "Arjun"]
```

---

### Exercise 7: Complex API Response (Hard)

Write a function `processAPIResponse(response)` that extracts and transforms data from a complex API response structure.

```javascript
const response = {
  status: 200,
  data: {
    users: [
      { id: 1, profile: { name: "Arjun", age: 19 }, active: true },
      { id: 2, profile: { name: "Krishna", age: 20 }, active: false }
    ],
    meta: { total: 100, page: 1 }
  }
};

processAPIResponse(response);
// {
//   activeUsers: [{ id: 1, name: "Arjun", age: 19 }],
//   totalUsers: 100,
//   currentPage: 1
// }
```

---

## Solutions

```javascript
// Solution 1: Extract First Three
function extractFirstThree(arr) {
  const [first = 0, second = 0, third = 0] = arr;
  return { first, second, third };
}

// Test
console.log(extractFirstThree([10, 20, 30, 40, 50]));
// { first: 10, second: 20, third: 30 }
console.log(extractFirstThree([5, 10]));
// { first: 5, second: 10, third: 0 }


// Solution 2: Swap Values
function swapValues(a, b, c) {
  return [b, c, a];
}

// Alternative using destructuring
function swapValues2(a, b, c) {
  [a, b, c] = [b, c, a];
  return [a, b, c];
}

// Test
console.log(swapValues(1, 2, 3)); // [2, 3, 1]
console.log(swapValues(10, 20, 30)); // [20, 30, 10]


// Solution 3: Get User Info
function getUserInfo(user) {
  const { name, email, age } = user;
  return { name, email, age };
}

// Alternative with direct return
function getUserInfo2(user) {
  const { id, role, ...info } = user;
  return info;
}

// Alternative using parameter destructuring
function getUserInfo3({ name, email, age }) {
  return { name, email, age };
}

// Test
const user = { id: 1, name: "Arjun", email: "arjun@test.com", age: 19, role: "student" };
console.log(getUserInfo(user));
// { name: "Arjun", email: "arjun@test.com", age: 19 }


// Solution 4: Extract Address
function extractAddress(user) {
  const { address: { city, pincode } } = user;
  return { city, pincode };
}

// Alternative
function extractAddress2({ address: { city, pincode } }) {
  return { city, pincode };
}

// Test
const userWithAddress = {
  name: "Krishna",
  address: { city: "Ahmedabad", state: "Gujarat", pincode: 380001 }
};
console.log(extractAddress(userWithAddress));
// { city: "Ahmedabad", pincode: 380001 }


// Solution 5: Create Employee
function createEmployee({
  name,
  department,
  role = "Developer",
  salary = 50000,
  active = true
}) {
  return { name, department, role, salary, active };
}

// Test
console.log(createEmployee({ name: "Arjun", department: "IT" }));
// { name: "Arjun", department: "IT", role: "Developer", salary: 50000, active: true }

console.log(createEmployee({ name: "Krishna", department: "HR", role: "Manager", salary: 80000 }));
// { name: "Krishna", department: "HR", role: "Manager", salary: 80000, active: true }


// Solution 6: Get Top Scorers
function getTopScorers(students, count) {
  return students
    .sort((a, b) => b.marks - a.marks)
    .slice(0, count)
    .map(({ name }) => name);
}

// Alternative with destructuring in parameters
function getTopScorers2(students, count) {
  const sorted = [...students].sort(({ marks: a }, { marks: b }) => b - a);
  return sorted.slice(0, count).map(({ name }) => name);
}

// Test
const students = [
  { name: "Arjun", marks: 85 },
  { name: "Krishna", marks: 92 },
  { name: "Priya", marks: 78 },
  { name: "Mahir", marks: 88 }
];
console.log(getTopScorers(students, 2)); // ["Krishna", "Mahir"]


// Solution 7: Process API Response
function processAPIResponse(response) {
  const {
    data: {
      users,
      meta: { total: totalUsers, page: currentPage }
    }
  } = response;

  const activeUsers = users
    .filter(({ active }) => active)
    .map(({ id, profile: { name, age } }) => ({ id, name, age }));

  return {
    activeUsers,
    totalUsers,
    currentPage
  };
}

// Test
const apiResponse = {
  status: 200,
  data: {
    users: [
      { id: 1, profile: { name: "Arjun", age: 19 }, active: true },
      { id: 2, profile: { name: "Krishna", age: 20 }, active: false },
      { id: 3, profile: { name: "Priya", age: 18 }, active: true }
    ],
    meta: { total: 100, page: 1 }
  }
};

console.log(processAPIResponse(apiResponse));
// {
//   activeUsers: [
//     { id: 1, name: "Arjun", age: 19 },
//     { id: 3, name: "Priya", age: 18 }
//   ],
//   totalUsers: 100,
//   currentPage: 1
// }
```

---

## Tests

```javascript
/**
 * Test Suite for Destructuring Exercises
 * Run with: node 15_destructuring_tests.js
 */

function assert(condition, message) {
  if (!condition) {
    console.error(`❌ FAILED: ${message}`);
    return false;
  } else {
    console.log(`✅ PASSED: ${message}`);
    return true;
  }
}

function deepEqual(obj1, obj2) {
  return JSON.stringify(obj1) === JSON.stringify(obj2);
}

console.log('╔════════════════════════════════════════════════════════════════╗');
console.log('║  Destructuring Assignment - Test Suite                        ║');
console.log('╚════════════════════════════════════════════════════════════════╝\n');

// Test Exercise 1
console.log('--- Testing Exercise 1: Extract First Three ---');
const result1 = extractFirstThree([10, 20, 30, 40, 50]);
assert(deepEqual(result1, { first: 10, second: 20, third: 30 }), "Extract first three elements");

const result1b = extractFirstThree([5, 10]);
assert(result1b.first === 5 && result1b.second === 10 && result1b.third === 0, "Handle fewer elements with defaults");

// Test Exercise 2
console.log('\n--- Testing Exercise 2: Swap Values ---');
const result2 = swapValues(1, 2, 3);
assert(deepEqual(result2, [2, 3, 1]), "Rotate three values");

const result2b = swapValues(10, 20, 30);
assert(deepEqual(result2b, [20, 30, 10]), "Rotate different values");

// Test Exercise 3
console.log('\n--- Testing Exercise 3: Get User Info ---');
const testUser = { id: 1, name: "Arjun", email: "arjun@test.com", age: 19, role: "student" };
const result3 = getUserInfo(testUser);
assert(
  result3.name === "Arjun" && result3.email === "arjun@test.com" && result3.age === 19,
  "Extract specific user properties"
);
assert(!result3.hasOwnProperty('id') && !result3.hasOwnProperty('role'), "Exclude other properties");

// Test Exercise 4
console.log('\n--- Testing Exercise 4: Extract Address ---');
const testUserAddr = {
  name: "Krishna",
  address: { city: "Ahmedabad", state: "Gujarat", pincode: 380001 }
};
const result4 = extractAddress(testUserAddr);
assert(deepEqual(result4, { city: "Ahmedabad", pincode: 380001 }), "Extract nested address properties");

// Test Exercise 5
console.log('\n--- Testing Exercise 5: Create Employee ---');
const result5a = createEmployee({ name: "Arjun", department: "IT" });
assert(
  result5a.name === "Arjun" &&
  result5a.department === "IT" &&
  result5a.role === "Developer" &&
  result5a.salary === 50000,
  "Create employee with defaults"
);

const result5b = createEmployee({ name: "Krishna", department: "HR", role: "Manager", salary: 80000 });
assert(result5b.role === "Manager" && result5b.salary === 80000, "Override defaults");

// Test Exercise 6
console.log('\n--- Testing Exercise 6: Get Top Scorers ---');
const testStudents = [
  { name: "Arjun", marks: 85 },
  { name: "Krishna", marks: 92 },
  { name: "Priya", marks: 78 },
  { name: "Mahir", marks: 88 }
];
const result6 = getTopScorers(testStudents, 2);
assert(deepEqual(result6, ["Krishna", "Mahir"]), "Get top 2 scorers");

const result6b = getTopScorers(testStudents, 3);
assert(result6b.length === 3 && result6b[0] === "Krishna", "Get top 3 scorers");

// Test Exercise 7
console.log('\n--- Testing Exercise 7: Process API Response ---');
const testAPIResponse = {
  status: 200,
  data: {
    users: [
      { id: 1, profile: { name: "Arjun", age: 19 }, active: true },
      { id: 2, profile: { name: "Krishna", age: 20 }, active: false },
      { id: 3, profile: { name: "Priya", age: 18 }, active: true }
    ],
    meta: { total: 100, page: 1 }
  }
};

const result7 = processAPIResponse(testAPIResponse);
assert(result7.totalUsers === 100 && result7.currentPage === 1, "Extract meta information");
assert(result7.activeUsers.length === 2, "Filter active users");
assert(
  result7.activeUsers[0].name === "Arjun" && result7.activeUsers[0].age === 19,
  "Transform user data correctly"
);

console.log('\n╔════════════════════════════════════════════════════════════════╗');
console.log('║  All Tests Completed                                           ║');
console.log('╚════════════════════════════════════════════════════════════════╝\n');
```

---

## Summary

Destructuring is a powerful feature that makes JavaScript code cleaner and more expressive:

**Key Takeaways:**

1. **Array destructuring** uses position, **object destructuring** uses property names
2. Use **rest pattern (`...`)** to collect remaining elements
3. Provide **default values** for missing properties
4. **Rename variables** during object destructuring with `:`
5. **Nested destructuring** works for complex data structures
6. **Parameter destructuring** makes function signatures cleaner
7. Combine with **array methods** and **loops** for powerful data processing
8. Watch out for **null/undefined** values

Master destructuring to write modern, professional JavaScript code!

---

**Last Updated**: 2025-11-22
**Version**: 1.0.0
