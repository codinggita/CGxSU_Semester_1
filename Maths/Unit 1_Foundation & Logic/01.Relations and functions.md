# Relations and Functions

## Learning Objectives

- Define relations and functions precisely using set-theoretic notation
- Distinguish between relations and functions through verification of the vertical line test property
- Classify functions as injective, surjective, or bijective using formal definitions
- Compute and distinguish between domain, codomain, and range
- Construct composition of functions and verify associativity
- Determine existence and construct inverses of bijective functions

## Prerequisites

- Understanding of sets, subsets, and set operations
- Familiarity with Cartesian products
- Basic logical notation (quantifiers and implications)
- Understanding of ordered pairs

## Definitions and Theoretical Foundations

### Definition 2.1 (Cartesian Product)
Let $A$ and $B$ be sets. The **Cartesian product** of $A$ and $B$, denoted $A \times B$, is the set of all ordered pairs $(a, b)$ where $a \in A$ and $b \in B$:

$$A \times B = \{(a, b) : a \in A \land b \in B\}$$

**Note:** The Cartesian product is ordered, meaning $(a, b) \neq (b, a)$ in general.

If $|A| = m$ and $|B| = n$, then $|A \times B| = mn$.

### Definition 2.2 (Relation)
A **relation** $R$ from set $A$ to set $B$ is any subset of the Cartesian product $A \times B$:

$$R \subseteq A \times B$$

We write $a \mathrel{R} b$ or $(a, b) \in R$ to denote that $a$ is related to $b$ under relation $R$.

**Special cases:**
- A relation from $A$ to $A$ is called a **relation on** $A$
- The **domain** of $R$ is $\text{dom}(R) = \{a \in A : \exists b \in B, (a,b) \in R\}$
- The **range** of $R$ is $\text{ran}(R) = \{b \in B : \exists a \in A, (a,b) \in R\}$

### Definition 2.3 (Function)
A **function** $f$ from set $A$ to set $B$, denoted $f: A \to B$, is a relation from $A$ to $B$ satisfying:

$$\forall a \in A, \exists! b \in B \text{ such that } (a, b) \in f$$

That is, every element in $A$ is paired with **exactly one** element in $B$.

**Terminology:**
- $A$ is the **domain** of $f$, denoted $\text{dom}(f)$
- $B$ is the **codomain** of $f$, denoted $\text{codom}(f)$
- If $(a, b) \in f$, we write $f(a) = b$, and $b$ is the **image** of $a$
- The **range** or **image** of $f$ is $\text{ran}(f) = \{f(a) : a \in A\} \subseteq B$

**Vertical Line Test:** A relation $R$ from $A$ to $B$ is a function if and only if for every $a \in A$, the vertical line $x = a$ intersects the graph of $R$ at exactly one point.

### Definition 2.4 (Injective Function)
A function $f: A \to B$ is **injective** (or **one-to-one**) if distinct elements in $A$ map to distinct elements in $B$:

$$\forall x_1, x_2 \in A, (f(x_1) = f(x_2) \implies x_1 = x_2)$$

**Contrapositive form:** $x_1 \neq x_2 \implies f(x_1) \neq f(x_2)$

**Horizontal Line Test:** A function is injective if every horizontal line intersects its graph at most once.

### Definition 2.5 (Surjective Function)
A function $f: A \to B$ is **surjective** (or **onto**) if every element in $B$ is the image of at least one element in $A$:

$$\forall b \in B, \exists a \in A \text{ such that } f(a) = b$$

Equivalently, $\text{ran}(f) = B$.

### Definition 2.6 (Bijective Function)
A function $f: A \to B$ is **bijective** if it is both injective and surjective. A bijection establishes a one-to-one correspondence between $A$ and $B$.

### Definition 2.7 (Function Composition)
Let $f: A \to B$ and $g: B \to C$ be functions. The **composition** of $g$ and $f$, denoted $g \circ f: A \to C$, is defined by:

$$(g \circ f)(a) = g(f(a)) \text{ for all } a \in A$$

**Theorem 2.1 (Associativity of Composition):** If $f: A \to B$, $g: B \to C$, and $h: C \to D$, then:
$$h \circ (g \circ f) = (h \circ g) \circ f$$

### Definition 2.8 (Inverse Function)
Let $f: A \to B$ be a bijection. The **inverse function** $f^{-1}: B \to A$ is defined by:

$$f^{-1}(b) = a \iff f(a) = b$$

**Theorem 2.2:** A function $f: A \to B$ has an inverse if and only if $f$ is bijective.

**Properties of Inverses:**
1. $f^{-1} \circ f = \text{id}_A$ (identity on $A$)
2. $f \circ f^{-1} = \text{id}_B$ (identity on $B$)
3. $(f^{-1})^{-1} = f$
4. If $f: A \to B$ and $g: B \to C$ are bijections, then $(g \circ f)^{-1} = f^{-1} \circ g^{-1}$

### Definition 2.9 (Identity Function)
For any set $A$, the **identity function** $\text{id}_A: A \to A$ is defined by:

$$\text{id}_A(a) = a \text{ for all } a \in A$$

### Properties of Functions

**Theorem 2.3:** If $f: A \to B$ and $g: B \to C$ are both injective, then $g \circ f: A \to C$ is injective.

**Theorem 2.4:** If $f: A \to B$ and $g: B \to C$ are both surjective, then $g \circ f: A \to C$ is surjective.

**Corollary:** If $f$ and $g$ are bijective, then $g \circ f$ is bijective.

## Worked Examples

### Example 1 (Simple): Verifying a Relation vs. Function

**Problem:** Let $A = \{1, 2, 3\}$ and $B = \{a, b, c\}$. Determine which of the following are functions from $A$ to $B$:

(a) $R_1 = \{(1, a), (2, b), (3, c)\}$

(b) $R_2 = \{(1, a), (2, b)\}$

(c) $R_3 = \{(1, a), (1, b), (2, c), (3, a)\}$

**Solution:**

(a) **Check if every element in $A$ maps to exactly one element in $B$:**
- $1 \mapsto a$ (uniquely)
- $2 \mapsto b$ (uniquely)
- $3 \mapsto c$ (uniquely)

Every element in $A$ has exactly one image. **$R_1$ is a function.** ✓

(b) **Check domain coverage:**
- $1 \mapsto a$ ✓
- $2 \mapsto b$ ✓
- $3$ has no image

Element $3 \in A$ is not mapped. **$R_2$ is not a function** (fails existence requirement). ✗

(c) **Check uniqueness:**
- $1$ maps to both $a$ and $b$ (not unique!)
- $2 \mapsto c$ ✓
- $3 \mapsto a$ ✓

Element $1$ has two images, violating uniqueness. **$R_3$ is not a function** (fails uniqueness requirement). ✗

---

### Example 2 (Intermediate): Proving Injectivity and Surjectivity

**Problem:** Consider $f: \mathbb{Z} \to \mathbb{Z}$ defined by $f(x) = 3x + 2$.

(a) Prove that $f$ is injective.

(b) Is $f$ surjective? Justify your answer.

**Solution:**

**(a) Proof of injectivity:**

Let $x_1, x_2 \in \mathbb{Z}$ and suppose $f(x_1) = f(x_2)$.

Then:
$$3x_1 + 2 = 3x_2 + 2$$

Subtracting 2 from both sides:
$$3x_1 = 3x_2$$

Dividing by 3:
$$x_1 = x_2$$

Since $f(x_1) = f(x_2)$ implies $x_1 = x_2$, the function $f$ is injective. $\square$

**(b) Surjectivity analysis:**

For $f$ to be surjective, we need: $\forall y \in \mathbb{Z}, \exists x \in \mathbb{Z}$ such that $f(x) = y$.

This requires:
$$3x + 2 = y$$
$$x = \frac{y - 2}{3}$$

For $x \in \mathbb{Z}$, we need $(y - 2)$ to be divisible by 3.

**Counterexample:** Let $y = 1$. Then $x = \frac{1-2}{3} = -\frac{1}{3} \notin \mathbb{Z}$.

Therefore, $1 \in \mathbb{Z}$ has no preimage in $\mathbb{Z}$. **$f$ is not surjective.** ✗

**Note:** If we changed the codomain to $\{3k + 2 : k \in \mathbb{Z}\}$, then $f$ would be surjective.

---

### Example 3 (Challenging): Function Composition

**Problem:** Let $f: \mathbb{R} \to \mathbb{R}$ be defined by $f(x) = 2x - 1$ and $g: \mathbb{R} \to \mathbb{R}$ by $g(x) = x^2 + 3$.

(a) Find $(g \circ f)(x)$ and $(f \circ g)(x)$

(b) Verify that composition is not commutative by showing $(g \circ f)(x) \neq (f \circ g)(x)$

**Solution:**

**(a) Computing compositions:**

$(g \circ f)(x) = g(f(x)) = g(2x - 1)$

Substitute into $g$:
$$= (2x - 1)^2 + 3$$
$$= 4x^2 - 4x + 1 + 3$$
$$= 4x^2 - 4x + 4$$

$(f \circ g)(x) = f(g(x)) = f(x^2 + 3)$

Substitute into $f$:
$$= 2(x^2 + 3) - 1$$
$$= 2x^2 + 6 - 1$$
$$= 2x^2 + 5$$

**(b) Verifying non-commutativity:**

We have:
- $(g \circ f)(x) = 4x^2 - 4x + 4$
- $(f \circ g)(x) = 2x^2 + 5$

These are clearly different polynomials. For instance, evaluating at $x = 0$:
- $(g \circ f)(0) = 4$
- $(f \circ g)(0) = 5$

Therefore, $(g \circ f) \neq (f \circ g)$, confirming composition is not commutative. $\square$

---

### Example 4 (Challenging): Inverse Function

**Problem:** Let $f: \mathbb{R} \to \mathbb{R}$ be defined by $f(x) = \frac{3x + 2}{5}$.

(a) Prove that $f$ is bijective

(b) Find the inverse function $f^{-1}$

(c) Verify that $f^{-1}(f(x)) = x$ and $f(f^{-1}(y)) = y$

**Solution:**

**(a) Proving bijectivity:**

**Injectivity:** Let $x_1, x_2 \in \mathbb{R}$ with $f(x_1) = f(x_2)$.

$$\frac{3x_1 + 2}{5} = \frac{3x_2 + 2}{5}$$

Multiplying both sides by 5:
$$3x_1 + 2 = 3x_2 + 2$$

Subtracting 2:
$$3x_1 = 3x_2$$

Dividing by 3:
$$x_1 = x_2$$

Therefore, $f$ is injective. ✓

**Surjectivity:** Let $y \in \mathbb{R}$ be arbitrary. We seek $x \in \mathbb{R}$ such that $f(x) = y$.

$$\frac{3x + 2}{5} = y$$
$$3x + 2 = 5y$$
$$3x = 5y - 2$$
$$x = \frac{5y - 2}{3}$$

Since $y \in \mathbb{R}$, we have $x = \frac{5y - 2}{3} \in \mathbb{R}$. Thus for every $y$, there exists such an $x$.

Therefore, $f$ is surjective. ✓

Since $f$ is both injective and surjective, $f$ is bijective. $\square$

**(b) Finding the inverse:**

From the surjectivity proof, we found that $x = \frac{5y - 2}{3}$ gives $f(x) = y$.

Therefore:
$$f^{-1}(y) = \frac{5y - 2}{3}$$

Or equivalently:
$$f^{-1}(x) = \frac{5x - 2}{3}$$

**(c) Verification:**

**Check $f^{-1}(f(x)) = x$:**

$$f^{-1}(f(x)) = f^{-1}\left(\frac{3x + 2}{5}\right) = \frac{5 \cdot \frac{3x + 2}{5} - 2}{3} = \frac{3x + 2 - 2}{3} = \frac{3x}{3} = x$$ ✓

**Check $f(f^{-1}(y)) = y$:**

$$f(f^{-1}(y)) = f\left(\frac{5y - 2}{3}\right) = \frac{3 \cdot \frac{5y - 2}{3} + 2}{5} = \frac{5y - 2 + 2}{5} = \frac{5y}{5} = y$$ ✓

Both verifications succeed. $\square$

---

### Example 5 (Advanced): Counting Functions

**Problem:** Let $A = \{1, 2, 3\}$ and $B = \{a, b\}$.

(a) How many relations are there from $A$ to $B$?

(b) How many functions are there from $A$ to $B$?

(c) How many injective functions are there from $A$ to $B$?

**Solution:**

**(a) Counting relations:**

A relation is any subset of $A \times B$.

First, compute $|A \times B| = |A| \cdot |B| = 3 \cdot 2 = 6$.

The number of subsets of a 6-element set is $2^6 = 64$.

**Answer:** 64 relations.

**(b) Counting functions:**

A function assigns to each element of $A$ exactly one element of $B$.
- Element 1 can map to any of 2 elements in $B$: 2 choices
- Element 2 can map to any of 2 elements in $B$: 2 choices
- Element 3 can map to any of 2 elements in $B$: 2 choices

Total: $2 \times 2 \times 2 = 2^3 = 8$ functions.

**General formula:** The number of functions from an $m$-element set to an $n$-element set is $n^m$.

Here: $|B|^{|A|} = 2^3 = 8$. ✓

**(c) Counting injective functions:**

An injective function requires distinct elements in $A$ to map to distinct elements in $B$.

Since $|A| = 3 > 2 = |B|$, by the pigeonhole principle, we cannot assign 3 distinct elements from $A$ to only 2 elements in $B$ without repetition.

**Answer:** 0 injective functions.

**General principle:** Injective functions from $A$ to $B$ exist only if $|A| \leq |B|$.

## Applications and Intuition

### Computer Science: Type Systems
Functions correspond to typed procedures in programming:
- **Domain** = input type (e.g., `int`)
- **Codomain** = return type (e.g., `String`)
- **Range** = actual values returned during execution

### Databases: Foreign Keys
Relations model database relationships:
- **One-to-one:** Injective function (e.g., Person → Passport)
- **One-to-many:** General function (e.g., Department → Employees)
- **Many-to-many:** General relation (e.g., Students → Courses)

### Cryptography: Hash Functions
Hash functions are surjective (many inputs map to same hash) but not injective, enabling:
- Data integrity verification
- Password storage
- Digital signatures

### Invertibility and Decryption
Bijective functions enable encryption/decryption:
- Encryption: $E: \text{PlainText} \to \text{CipherText}$ (bijection)
- Decryption: $D = E^{-1}: \text{CipherText} \to \text{PlainText}$

## Exercises

### Exercise 1
Let $A = \{1, 2, 3, 4\}$ and $B = \{x, y, z\}$. Which of the following are functions from $A$ to $B$?

(a) $f_1 = \{(1, x), (2, y), (3, z), (4, x)\}$

(b) $f_2 = \{(1, x), (2, y), (3, z)\}$

(c) $f_3 = \{(1, x), (2, x), (3, y), (3, z), (4, y)\}$

**Hint:** Check existence and uniqueness for each element of $A$.

**Solution:**
(a) Every element in $A$ maps to exactly one element in $B$. **Function.** ✓
(b) Element 4 has no image. **Not a function.** ✗
(c) Element 3 maps to both $y$ and $z$. **Not a function.** ✗

---

### Exercise 2
Prove that the function $f: \mathbb{R} \to \mathbb{R}$ defined by $f(x) = -2x + 5$ is bijective and find its inverse.

**Hint:** Prove injectivity and surjectivity separately, then solve $y = -2x + 5$ for $x$.

**Solution:**

**Injectivity:** Suppose $f(x_1) = f(x_2)$. Then $-2x_1 + 5 = -2x_2 + 5$, so $-2x_1 = -2x_2$, thus $x_1 = x_2$. ✓

**Surjectivity:** For any $y \in \mathbb{R}$, let $x = \frac{5 - y}{2} \in \mathbb{R}$. Then $f(x) = -2 \cdot \frac{5-y}{2} + 5 = -(5-y) + 5 = y$. ✓

**Inverse:** $f^{-1}(x) = \frac{5 - x}{2}$

---

### Exercise 3
Let $f: A \to B$ and $g: B \to C$. Prove that if $g \circ f$ is injective, then $f$ is injective.

**Hint:** Use proof by contradiction or contrapositive.

**Solution:**

Suppose $f(a_1) = f(a_2)$ for some $a_1, a_2 \in A$.

Then $(g \circ f)(a_1) = g(f(a_1)) = g(f(a_2)) = (g \circ f)(a_2)$.

Since $g \circ f$ is injective, $(g \circ f)(a_1) = (g \circ f)(a_2)$ implies $a_1 = a_2$.

Therefore, $f(a_1) = f(a_2)$ implies $a_1 = a_2$, so $f$ is injective. $\square$

---

### Exercise 4
How many surjective functions are there from $\{1, 2, 3\}$ to $\{a, b\}$?

**Hint:** Use inclusion-exclusion. Total functions minus those missing at least one element in codomain.

**Solution:**

Total functions: $2^3 = 8$

Functions missing $a$: All elements map to $b$: 1 function

Functions missing $b$: All elements map to $a$: 1 function

Functions missing both: 0 (impossible—every function must map somewhere)

By inclusion-exclusion:
Surjective functions = $8 - 1 - 1 + 0 = 6$

**Answer:** 6 surjective functions.

---

### Exercise 5
Let $f: \mathbb{Z} \to \mathbb{Z}$ be defined by:

$$f(x) = \begin{cases} x + 1 & \text{if } x \text{ is even} \\ x - 1 & \text{if } x \text{ is odd} \end{cases}$$

(a) Is $f$ injective?

(b) Is $f$ surjective?

(c) Is $f$ bijective? If so, find $f^{-1}$.

**Hint:** Check cases for injectivity and surjectivity.

**Solution:**

**(a) Injectivity:**

Suppose $f(x_1) = f(x_2)$.

**Case 1:** Both even. Then $x_1 + 1 = x_2 + 1$, so $x_1 = x_2$. ✓

**Case 2:** Both odd. Then $x_1 - 1 = x_2 - 1$, so $x_1 = x_2$. ✓

**Case 3:** One even, one odd. Say $x_1$ even, $x_2$ odd. Then $x_1 + 1 = x_2 - 1$, so $x_1 = x_2 - 2$. But $x_1$ even and $x_2 - 2$ odd (since $x_2$ odd), contradiction. ✗

Actually, let me reconsider. If $x_2$ is odd, then $x_2 - 2$ is also odd, but we assumed $x_1$ is even. So this case cannot occur.

**$f$ is injective.** ✓

**(b) Surjectivity:**

For any $y \in \mathbb{Z}$:
- If $y$ is odd, choose $x = y - 1$ (even). Then $f(x) = x + 1 = y$. ✓
- If $y$ is even, choose $x = y + 1$ (odd). Then $f(x) = x - 1 = y$. ✓

**$f$ is surjective.** ✓

**(c) Bijectivity and inverse:**

Since $f$ is both injective and surjective, **$f$ is bijective.** ✓

The inverse is:

$$f^{-1}(y) = \begin{cases} y - 1 & \text{if } y \text{ is odd} \\ y + 1 & \text{if } y \text{ is even} \end{cases}$$

Note that $f^{-1} = f$ (the function is its own inverse).

---

### Exercise 6 (Challenge)
Let $A$, $B$, and $C$ be finite sets with $|A| = m$, $|B| = n$, $|C| = p$.

(a) How many functions are there from $A$ to $B$?

(b) If $m \leq n$, how many injective functions are there from $A$ to $B$?

(c) How many bijections are there from $A$ to $A$?

**Hint:** Use combinatorial counting principles.

**Solution:**

(a) Each of $m$ elements in $A$ can map to any of $n$ elements in $B$: $n^m$

(b) Injective functions correspond to ordered selections without replacement:
$$n \cdot (n-1) \cdot (n-2) \cdots (n-m+1) = \frac{n!}{(n-m)!} = P(n, m)$$

(c) Bijections from $A$ to $A$ are permutations of $A$: $m!$

---

### Exercise 7 (Challenge)
Prove that if $f: A \to B$ is bijective and $g: B \to C$ is bijective, then $(g \circ f)^{-1} = f^{-1} \circ g^{-1}$.

**Hint:** Show both directions of composition yield identity.

**Solution:**

We need to show $(g \circ f) \circ (f^{-1} \circ g^{-1}) = \text{id}_C$ and $(f^{-1} \circ g^{-1}) \circ (g \circ f) = \text{id}_A$.

**First direction:**

Let $c \in C$. Then:
$$((g \circ f) \circ (f^{-1} \circ g^{-1}))(c) = (g \circ f)((f^{-1} \circ g^{-1})(c))$$
$$= (g \circ f)(f^{-1}(g^{-1}(c)))$$
$$= g(f(f^{-1}(g^{-1}(c))))$$
$$= g(\text{id}_B(g^{-1}(c)))$$
$$= g(g^{-1}(c))$$
$$= \text{id}_C(c) = c$$

**Second direction:**

Let $a \in A$. Then:
$$((f^{-1} \circ g^{-1}) \circ (g \circ f))(a) = (f^{-1} \circ g^{-1})((g \circ f)(a))$$
$$= (f^{-1} \circ g^{-1})(g(f(a)))$$
$$= f^{-1}(g^{-1}(g(f(a))))$$
$$= f^{-1}(\text{id}_B(f(a)))$$
$$= f^{-1}(f(a))$$
$$= \text{id}_A(a) = a$$

Therefore, $(g \circ f)^{-1} = f^{-1} \circ g^{-1}$. $\square$

## Common Mistakes and Misconceptions

1. **Confusing relations and functions:** Not every relation is a function. A function requires that each input has exactly one output.

2. **Confusing codomain and range:** The codomain is the declared target set; the range is the actual set of outputs. Range $\subseteq$ Codomain, but they may not be equal.

3. **Assuming injectivity from surjectivity:** A function can be surjective without being injective, and vice versa.

4. **Composition order:** $(g \circ f)(x) = g(f(x))$ means "apply $f$ first, then $g$." The order matters: $g \circ f \neq f \circ g$ in general.

5. **Inverse notation confusion:** $f^{-1}$ denotes the inverse function (only for bijections), not $\frac{1}{f(x)}$.

6. **Assuming all functions have inverses:** Only bijective functions have inverses. Injective-only or surjective-only functions do not.

## Summary and Key Takeaways

1. **Relations** are subsets of Cartesian products; **functions** are special relations where each input has exactly one output.

2. **Injective functions** (one-to-one) preserve distinctness: different inputs yield different outputs.

3. **Surjective functions** (onto) cover the entire codomain: every codomain element is an output.

4. **Bijective functions** are both injective and surjective, establishing perfect one-to-one correspondences.

5. **Function composition** is associative but not commutative: $(h \circ g) \circ f = h \circ (g \circ f)$, but $g \circ f \neq f \circ g$ in general.

6. **Inverse functions** exist precisely for bijections, satisfying $f^{-1} \circ f = \text{id}_A$ and $f \circ f^{-1} = \text{id}_B$.

7. **Counting:** Functions from $m$-element set to $n$-element set: $n^m$. Bijections from $m$-element set to itself: $m!$.

---

**Further Study:** Explore equivalence relations, partial orders, and the concept of function spaces in abstract algebra and topology.
