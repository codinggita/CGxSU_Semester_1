# Trees

## Learning Objectives

- Understand the formal definition of trees and their fundamental properties
- Master tree terminology: roots, leaves, height, depth, subtrees
- Prove structural properties of trees using induction
- Work with special tree types: binary trees, full, complete, balanced
- Apply tree traversal algorithms (preorder, inorder, postorder)
- Understand spanning trees and minimum spanning trees
- Analyze tree applications in computer science and optimization

## Prerequisites

- Graph theory fundamentals (vertices, edges, paths, cycles)
- Understanding of connectivity and acyclicity
- Basic proof techniques (induction, contradiction)
- Recursion concepts

## Definitions and Theoretical Foundations

### Definition 4.1 (Tree)

A **tree** is a connected acyclic graph.

Equivalently (by Theorem 3.3 from previous notes), a tree $T$ with $n$ vertices satisfies any of the following equivalent conditions:
1. $T$ is connected and has no cycles
2. $T$ is connected and has exactly $n - 1$ edges
3. Any two vertices are connected by exactly one path
4. $T$ is acyclic and has exactly $n - 1$ edges
5. $T$ is connected and every edge is a bridge

### Definition 4.2 (Forest)

A **forest** is an acyclic graph (not necessarily connected). Each connected component of a forest is a tree.

A forest with $n$ vertices and $k$ connected components has exactly $n - k$ edges.

### Definition 4.3 (Rooted Tree)

A **rooted tree** is a tree with one designated vertex called the **root**. This imposes a hierarchical structure:
- The root is at level 0
- Every other vertex $v$ is at level $d$ where $d$ is the distance from the root to $v$

**Terminology:**
- **Parent:** For vertex $v \neq$ root, the unique vertex on the path from root to $v$ adjacent to $v$
- **Child:** $u$ is a child of $v$ if $v$ is the parent of $u$
- **Siblings:** Vertices with the same parent
- **Ancestor:** A vertex on the path from root to $v$
- **Descendant:** A vertex in the subtree rooted at $v$
- **Leaf (external node):** A vertex with no children
- **Internal node:** A vertex with at least one child

### Definition 4.4 (Tree Properties)

**Height of a vertex $v$:** The length of the longest path from $v$ to any leaf in the subtree rooted at $v$.

**Height of a tree:** The height of the root.

**Depth of a vertex $v$:** The length of the path from the root to $v$ (equivalently, the level of $v$).

**Subtree rooted at $v$:** The tree consisting of $v$ and all its descendants.

### Theorem 4.1 (Fundamental Tree Property)

A tree with $n$ vertices has exactly $n - 1$ edges.

**Proof:**

By induction on $n$.

**Base case:** $n = 1$. A tree with one vertex has 0 edges, and $0 = 1 - 1$. ✓

**Inductive step:** Assume true for all trees with $k$ vertices. Consider a tree $T$ with $k + 1$ vertices.

Since $T$ is a tree, it is connected and acyclic. Choose any leaf $v$ (a tree has at least 2 leaves if $n \geq 2$). Remove $v$ and its incident edge $e$ to form $T' = T - v$.

$T'$ is still a tree (connected and acyclic) with $k$ vertices. By the inductive hypothesis, $T'$ has $k - 1$ edges.

Therefore, $T$ has $(k - 1) + 1 = k$ edges, which equals $(k + 1) - 1$. ✓

By induction, the theorem holds for all $n \geq 1$. $\square$

### Theorem 4.2 (Adding an Edge Creates a Cycle)

If $T$ is a tree and an edge is added between two non-adjacent vertices, the resulting graph contains exactly one cycle.

**Proof:**

Let $T = (V, E)$ be a tree and $u, v \in V$ be non-adjacent. Since $T$ is a tree, there exists a unique path $P$ from $u$ to $v$.

Adding edge $e = \{u, v\}$ creates graph $G = (V, E \cup \{e\})$.

The path $P$ together with edge $e$ forms a cycle. This is the only cycle because $T$ was acyclic, and adding one edge can create at most one new cycle. $\square$

### Definition 4.5 (Binary Tree)

A **binary tree** is a rooted tree where each vertex has at most two children, designated as **left child** and **right child**.

### Definition 4.6 (Full Binary Tree)

A **full binary tree** (or **proper binary tree**) is a binary tree where every internal node has exactly two children.

**Property:** A full binary tree with $n$ internal nodes has $n + 1$ leaves.

**Proof:** Let $i$ be the number of internal nodes and $\ell$ the number of leaves. Total vertices: $n = i + \ell$.

By Theorem 4.1, edges: $n - 1 = i + \ell - 1$.

Each internal node has 2 children, contributing 2 edges downward. The root has no parent. So: $2i = (i + \ell) - 1$, giving $i = \ell - 1$, hence $\ell = i + 1$. $\square$

### Definition 4.7 (Complete Binary Tree)

A **complete binary tree** is a binary tree in which:
1. All levels are completely filled except possibly the last
2. The last level is filled from left to right

**Property:** A complete binary tree with $n$ nodes has height $\lfloor \log_2 n \rfloor$.

### Definition 4.8 (Balanced Binary Tree)

A **balanced binary tree** (or **height-balanced tree**) is one where for every vertex, the heights of its left and right subtrees differ by at most 1.

Examples: AVL trees, Red-Black trees.

### Definition 4.9 (Spanning Tree)

A **spanning tree** of a connected graph $G = (V, E)$ is a subgraph $T = (V, E')$ that is a tree.

That is, $T$ contains all vertices of $G$ and is connected and acyclic.

**Property:** Every connected graph has at least one spanning tree.

### Theorem 4.3 (Existence of Spanning Trees)

Every connected graph contains a spanning tree.

**Proof:**

Let $G = (V, E)$ be connected with $n$ vertices.

If $G$ is acyclic, then $G$ itself is a tree (connected and acyclic), so $G$ is its own spanning tree.

If $G$ contains a cycle, remove one edge from the cycle. The graph remains connected (any path using the removed edge can be rerouted through the cycle).

Repeat until no cycles remain. The result is a connected acyclic spanning subgraph—a spanning tree. $\square$

### Definition 4.10 (Minimum Spanning Tree - MST)

For a weighted connected graph $G = (V, E, w)$, a **minimum spanning tree** is a spanning tree $T$ whose total edge weight is minimized:
$$w(T) = \sum_{e \in E(T)} w(e)$$

**Algorithms:** Kruskal's and Prim's algorithms find MSTs efficiently.

## Worked Examples

### Example 1 (Simple): Verifying Tree Properties

**Problem:** Determine if the graph with vertices $\{1, 2, 3, 4, 5\}$ and edges $\{\{1,2\}, \{2,3\}, \{3,4\}, \{3,5\}\}$ is a tree.

**Solution:**

Vertices: $n = 5$

Edges: $m = 4 = n - 1$ ✓

Check connectivity: Starting from vertex 1, we can reach:
- 1 → 2 → 3 → 4 ✓
- 1 → 2 → 3 → 5 ✓

All vertices reachable, so connected. ✓

Check acyclicity: Follow any path—no vertex is revisited.

Since the graph is connected with $n - 1$ edges, it is a tree. ✓ $\square$

---

### Example 2 (Intermediate): Counting Leaves

**Problem:** A full binary tree has 15 internal nodes. How many leaves does it have?

**Solution:**

For a full binary tree, if $i$ = number of internal nodes, then $\ell$ = number of leaves satisfies:
$$\ell = i + 1$$

Given $i = 15$:
$$\ell = 15 + 1 = 16$$

**Answer:** 16 leaves. $\square$

---

### Example 3 (Intermediate): Binary Tree Height

**Problem:** A complete binary tree has 31 nodes. What is its height?

**Solution:**

For a complete binary tree with $n$ nodes:
$$h = \lfloor \log_2 n \rfloor$$

With $n = 31$:
$$h = \lfloor \log_2 31 \rfloor = \lfloor 4.95... \rfloor = 4$$

**Answer:** Height = 4. $\square$

---

### Example 4 (Challenging): Forest Properties

**Problem:** A forest has 20 vertices and 3 connected components (trees). How many edges does it have?

**Solution:**

Let the three trees have $n_1, n_2, n_3$ vertices with $n_1 + n_2 + n_3 = 20$.

Each tree with $n_i$ vertices has $n_i - 1$ edges.

Total edges:
$$e = (n_1 - 1) + (n_2 - 1) + (n_3 - 1) = (n_1 + n_2 + n_3) - 3 = 20 - 3 = 17$$

**Answer:** 17 edges. $\square$

---

### Example 5 (Challenging): Spanning Tree Count for Specific Graphs

**Problem:** How many spanning trees does the cycle graph $C_5$ have?

**Solution:**

The cycle $C_5$ has 5 vertices and 5 edges forming a single cycle.

A spanning tree must include all 5 vertices and have $5 - 1 = 4$ edges.

To form a tree, we must remove exactly one edge from the cycle.

There are 5 choices for which edge to remove.

**Answer:** $C_5$ has exactly 5 spanning trees. $\square$

---

### Example 6 (Advanced): Binary Tree Node Count

**Problem:** Prove that a binary tree of height $h$ has at most $2^{h+1} - 1$ nodes.

**Solution:**

We prove by induction on $h$.

**Base case:** $h = 0$ (single node, the root).

Number of nodes = 1 = $2^{0+1} - 1 = 2 - 1 = 1$. ✓

**Inductive step:** Assume true for height $k$. Consider a binary tree $T$ of height $k + 1$.

The root has at most 2 subtrees, each of height at most $k$.

By the inductive hypothesis, each subtree has at most $2^{k+1} - 1$ nodes.

Total nodes in $T$:
$$n \leq 1 + 2(2^{k+1} - 1) = 1 + 2^{k+2} - 2 = 2^{k+2} - 1 = 2^{(k+1)+1} - 1$$ ✓

By induction, the theorem holds. $\square$

## Tree Traversal Algorithms

### Definition 4.11 (Tree Traversal)

A **tree traversal** is a systematic method to visit all vertices of a rooted tree.

For binary trees, three common traversals:

1. **Preorder:** Visit root, traverse left subtree, traverse right subtree
2. **Inorder:** Traverse left subtree, visit root, traverse right subtree
3. **Postorder:** Traverse left subtree, traverse right subtree, visit root

**Example Tree:**
```
       A
      / \
     B   C
    / \
   D   E
```

- **Preorder:** A, B, D, E, C
- **Inorder:** D, B, E, A, C
- **Postorder:** D, E, B, C, A

## Applications and Intuition

### Computer Science

**Data Structures:** Binary search trees, heaps, tries, expression trees all use tree structures for efficient search, insertion, and retrieval.

**File Systems:** Directories form a tree structure (rooted at root directory).

**Compilers:** Parse trees and syntax trees represent program structure.

**Network Routing:** Spanning trees ensure loop-free routing in network protocols (e.g., Spanning Tree Protocol in Ethernet).

### Optimization

**Minimum Spanning Trees:** Finding cheapest network connections (roads, cables, pipelines). Algorithms: Kruskal's (greedy, sort edges), Prim's (greedy, grow tree).

### Decision Making

**Decision Trees:** AI and machine learning models for classification and regression.

### Biology

**Phylogenetic Trees:** Represent evolutionary relationships.

## Exercises

### Exercise 1

How many edges does a tree with 100 vertices have?

**Hint:** Use Theorem 4.1.

**Solution:** $n - 1 = 100 - 1 = 99$ edges.

---

### Exercise 2

A forest has 50 vertices and 42 edges. How many trees (connected components) does it have?

**Hint:** Forest with $n$ vertices, $k$ components has $n - k$ edges.

**Solution:**
$$42 = 50 - k \implies k = 8$$

**Answer:** 8 trees.

---

### Exercise 3

Prove that every tree with at least 2 vertices has at least 2 leaves.

**Hint:** Use degree sum and properties of trees.

**Solution:**
By Handshaking Lemma: $\sum \deg(v) = 2(n - 1)$.

If only one leaf exists, all others have degree ≥ 2. Sum: $\geq 1 + 2(n - 1) = 2n - 1 > 2(n - 1)$, contradiction.

Therefore, at least 2 leaves exist. $\square$

---

### Exercise 4

A complete binary tree has height 4. What is the minimum and maximum number of nodes?

**Hint:** Height $h$ means longest path has $h$ edges. Minimum: last level has 1 node. Maximum: last level is full.

**Solution:**
- **Minimum:** Levels 0 through 3 full, level 4 has 1 node.
  $$1 + 2 + 4 + 8 + 1 = 16$$

- **Maximum:** All levels full.
  $$1 + 2 + 4 + 8 + 16 = 31 = 2^5 - 1$$

**Answer:** Min = 16, Max = 31.

---

### Exercise 5

In a rooted tree, the root has degree 3, and every other internal node has degree 4. If there are 10 leaves, how many internal nodes are there?

**Hint:** Use Handshaking Lemma and tree edge count.

**Solution:**
Let $i$ = internal nodes, $\ell = 10$ leaves.

Total vertices: $n = i + 10$.

Edges: $n - 1 = i + 9$.

Degree sum:
- Root: 3
- Other internal nodes ($i - 1$): each degree 4
- Leaves: each degree 1

$$\sum \deg = 3 + 4(i - 1) + 10 = 4i + 9$$

Handshaking: $4i + 9 = 2(i + 9) = 2i + 18$

Solving: $2i = 9$, which is not an integer. **This problem setup is inconsistent.**

Corrected problem: Likely meant "degree 5" (including parent and 4 children) or different setup.

---

### Exercise 6 (Challenge)

Prove that in any tree, the number of vertices with odd degree is even.

**Hint:** Use the handshaking lemma.

**Solution:**
By Corollary 1.2, this holds for **all** graphs, including trees. The proof is identical to the general case. $\square$

---

### Exercise 7 (Challenge)

A binary tree has $n$ nodes. Prove that it has exactly $n + 1$ null (missing) child pointers.

**Hint:** Each node has 2 potential children. Count total pointers and subtract edges.

**Solution:**
Total potential child pointers: $2n$ (each node has 2 slots).

Actual children: $n - 1$ (edges in the tree).

Null pointers: $2n - (n - 1) = n + 1$. $\square$

## Common Mistakes and Misconceptions

1. **Trees vs. rooted trees:** An unrooted tree has no designated root. Rooting it imposes parent-child relationships.

2. **Full vs. complete:** Full = every internal node has 2 children. Complete = all levels filled left-to-right.

3. **Height vs. depth:** Height is measured from a node downward to leaves. Depth is from root to node.

4. **Spanning tree uniqueness:** A graph may have multiple spanning trees (e.g., $C_n$ has $n$ spanning trees).

5. **Edge count:** Always $n - 1$ for trees. If you count differently, verify the graph is actually a tree.

## Summary and Key Takeaways

1. **Tree:** Connected acyclic graph with $n$ vertices and $n - 1$ edges.

2. **Forest:** Acyclic graph (possibly disconnected); components are trees.

3. **Rooted tree:** Imposes hierarchy with parent-child relationships.

4. **Binary trees:** At most 2 children per node. Special types: full, complete, balanced.

5. **Spanning tree:** Connects all vertices of a graph with minimal edges (no cycles).

6. **Minimum spanning tree:** Spanning tree with minimum total edge weight.

7. **Tree traversals:** Preorder, inorder, postorder systematically visit all nodes.

8. **Applications:** Data structures, optimization, network design, decision systems.

---

**Further Study:** Explore B-trees, binary search trees (BST), AVL trees, red-black trees, Kruskal's and Prim's algorithms for MST, tree isomorphism.
